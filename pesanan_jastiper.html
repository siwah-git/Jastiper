<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Jastiper - TitipGo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Using the Inter font */
            background-image: url('https://i.ibb.co/G0sTW8C/bg-titipgo.png');
            /* Customizable Background Image */
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
            height: 100vh;
            overflow: hidden;
            /* Prevent scroll on body, main content handles it */
        }

        /* Sidebar Styling */
        .sidebar {
            width: 250px;
            /* Fixed width - Customizable */
            background-color: #fff;
            /* Sidebar background color - Customizable */
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            /* Sidebar shadow - Customizable */
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            /* Allow sidebar to scroll if content is long */
        }

        .sidebar-header {
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid #e0e0e0;
        }

        .sidebar-header img {
            height: 40px;
            /* Logo height - Customizable */
            object-fit: contain;
        }

        .sidebar-nav ul {
            padding: 1rem 0;
            flex-grow: 1;
            /* Allow navigation to take available space */
        }

        .sidebar-nav li {
            padding: 0.75rem 1.5rem;
            margin: 0.25rem 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #333;
            transition: background-color 0.2s, color 0.2s;
        }

        .sidebar-nav li:hover {
            background-color: #f8e5f0;
            /* Hover background color - Customizable */
            color: #ec4899;
            /* Hover text color - Customizable */
        }

        /* Active state for sidebar navigation */
        .sidebar-nav li.active {
            background-color: #f8e5f0;
            /* Active background color - Customizable */
            color: #ec4899;
            /* Active text color - Customizable */
            font-weight: 600;
        }

        .sidebar-nav li.active span {
            font-weight: 800;
            /* Make emoji/icon bolder if it's an actual icon */
        }

        .sidebar-nav li a {
            text-decoration: none;
            /* Remove underline for links in sidebar */
            color: inherit;
            /* Inherit color from parent li */
        }


        /* Main Content Area */
        .main-content {
            flex-grow: 1;
            padding: 1.5rem;
            overflow-y: auto;
            /* Enable scrolling for main content */
            position: relative;
            display: flex;
            flex-direction: column;
        }

        /* Card Styling (re-used for main sections) */
        .card {
            background-color: rgba(255, 255, 255, 0.9);
            /* Slightly transparent white - Customizable */
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            /* Add margin-bottom for spacing */
        }

        /* Form Input Styling (jika ada form di dashboard) */
        .input-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 1rem;
        }

        .input-group label {
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.25rem;
            font-weight: 500;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            flex-grow: 1;
            padding: 0.5rem 0.75rem;
            border: 1px solid #ccc;
            border-radius: 0.375rem;
            font-size: 0.9rem;
            color: #333;
            background-color: #f9f9f9;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #ec4899;
            box-shadow: 0 0 0 2px rgba(236, 72, 153, 0.2);
        }

        /* Image Preview (if applicable) */
        #edit-product-image-preview {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 0.5rem;
            border: 1px solid #eee;
        }

        /* Button Styling */
        .btn-primary {
            background-color: #ec4899;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
            box-shadow: 0 2px 4px rgba(236, 72, 153, 0.2);
            cursor: pointer;
        }

        .btn-primary:hover {
            background-color: #db2777;
        }

        .btn-secondary {
            background-color: #f0f0f0;
            color: #333;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s, border-color 0.2s;
            border: 1px solid #ccc;
            cursor: pointer;
        }

        .btn-secondary:hover {
            background-color: #e0e0e0;
        }

        .btn-danger {
            background-color: #ef4444;
            color: white;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s;
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);
            cursor: pointer;
        }

        .btn-danger:hover {
            background-color: #dc2626;
        }

        /* Modal (Popup) Styling for Logout */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: translateY(-20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }

        .modal-buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 1.5rem;
            gap: 1rem;
        }

        .modal-buttons button {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
        }

        .modal-buttons .btn-cancel {
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ccc;
        }

        .modal-buttons .btn-cancel:hover {
            background-color: #e0e0e0;
        }

        .modal-buttons .btn-confirm {
            background-color: #ef4444;
            color: white;
            border: 1px solid #ef4444;
        }

        .modal-buttons .btn-confirm:hover {
            background-color: #dc2626;
        }

        /* Tab styling */
        .tab-container {
            display: flex;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab-button {
            padding: 0.75rem 1.25rem;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: color 0.2s, border-color 0.2s;
        }

        .tab-button.active {
            color: #ec4899;
            border-color: #ec4899;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Styling for order list/table */
        .order-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5rem;
        }

        .order-table th,
        .order-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .order-table th {
            background-color: #f8f8f8;
            font-weight: 600;
            color: #555;
        }

        .order-table tbody tr:hover {
            background-color: #f5f5f5;
        }

        /* Badge/Status styling */
        .status-badge {
            padding: 0.3em 0.6em;
            border-radius: 0.25em;
            font-size: 0.85em;
            font-weight: 600;
            color: white;
            display: inline-block;
            text-align: center;
        }

        .status-menunggu-pembayaran {
            background-color: #f97316;
        }

        /* Orange */
        .status-diproses {
            background-color: #3b82f6;
        }

        /* Blue */
        .status-dikirim {
            background-color: #22c55e;
        }

        /* Green */
        .status-selesai {
            background-color: #10b981;
        }

        /* Emerald Green */
        .status-dibatalkan {
            background-color: #ef4444;
        }

        /* Red */
        .status-dikembalikan {
            background-color: #6b7280;
        }

        /* Gray */
        .status-perlu-verifikasi {
            background-color: #eab308;
        }

        /* Yellow */

        /* Additional styles for dashboard specific elements */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .summary-card {
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 0.75rem;
            padding: 1.25rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .summary-card h3 {
            font-size: 1rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .summary-card p {
            font-size: 2rem;
            font-weight: 700;
            color: #ec4899;
            /* Pink for emphasis */
        }
    </style>
</head>

<body>
    <div class="flex h-full">
        <div class="sidebar">
            <div class="sidebar-header">
                <img src="https://i.ibb.co/4J1yg0g/logo-titipgo.png" alt="TitipGo">
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active"><span>üìã</span> <a href="jastiper_dashboard.html">To-Do List</a></li>
                    <li><span>üè¨</span> <a href="toko_kita.html">Toko Kita</a></li>
                    <li><span>üí¨</span> Chat</li>
                    <li id="logout-button"><span>‚û°Ô∏è</span> Logout</li>
                </ul>
            </nav>
        </div>

        <div class="main-content">
            <h1 class="text-2xl font-bold text-gray-800 mb-6">Dashboard Jastiper</h1>

            <div class="summary-cards">
                <div class="summary-card">
                    <h3>Total Pesanan</h3>
                    <p id="total-pesanan">0</p>
                </div>
                <div class="summary-card">
                    <h3>Menunggu Pembayaran</h3>
                    <p id="menunggu-pembayaran">0</p>
                </div>
                <div class="summary-card">
                    <h3>Siap Diproses</h3>
                    <p id="siap-diproses">0</p>
                </div>
                <div class="summary-card">
                    <h3>Dalam Pengiriman</h3>
                    <p id="dalam-pengiriman">0</p>
                </div>
            </div>

            <div class="card mb-6">
                <div class="tab-container">
                    <div class="tab-button active" data-tab="semua-pesanan">Semua Pesanan</div>
                    <div class="tab-button" data-tab="belum-bayar">Belum Bayar</div>
                    <div class="tab-button" data-tab="siap-proses">Siap Proses</div>
                    <div class="tab-button" data-tab="dikirim">Dikirim</div>
                    <div class="tab-button" data-tab="selesai">Selesai</div>
                    <div class="tab-button" data-tab="dibatalkan">Dibatalkan</div>
                </div>

                <div id="semua-pesanan-content" class="tab-content active">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Daftar Semua Pesanan</h2>
                    <div class="overflow-x-auto">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th>ID Pesanan</th>
                                    <th>Produk</th>
                                    <th>Pembeli</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="semua-pesanan-list">
                                <tr>
                                    <td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="belum-bayar-content" class="tab-content">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Pesanan Belum Dibayar</h2>
                    <div class="overflow-x-auto">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th>ID Pesanan</th>
                                    <th>Produk</th>
                                    <th>Pembeli</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="belum-bayar-list">
                                <tr>
                                    <td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="siap-proses-content" class="tab-content">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Pesanan Siap Diproses</h2>
                    <div class="overflow-x-auto">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th>ID Pesanan</th>
                                    <th>Produk</th>
                                    <th>Pembeli</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="siap-proses-list">
                                <tr>
                                    <td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="dikirim-content" class="tab-content">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Pesanan Dalam Pengiriman</h2>
                    <div class="overflow-x-auto">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th>ID Pesanan</th>
                                    <th>Produk</th>
                                    <th>Pembeli</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="dikirim-list">
                                <tr>
                                    <td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="selesai-content" class="tab-content">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Pesanan Selesai</h2>
                    <div class="overflow-x-auto">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th>ID Pesanan</th>
                                    <th>Produk</th>
                                    <th>Pembeli</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="selesai-list">
                                <tr>
                                    <td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="dibatalkan-content" class="tab-content">
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">Pesanan Dibatalkan</h2>
                    <div class="overflow-x-auto">
                        <table class="order-table">
                            <thead>
                                <tr>
                                    <th>ID Pesanan</th>
                                    <th>Produk</th>
                                    <th>Pembeli</th>
                                    <th>Tanggal</th>
                                    <th>Total</th>
                                    <th>Status</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="dibatalkan-list">
                                <tr>
                                    <td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="logout-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="text-xl font-semibold mb-4">Konfirmasi Logout</h3>
            <p class="text-gray-700">Apakah Anda yakin ingin keluar dari akun ini?</p>
            <div class="modal-buttons">
                <button id="cancel-logout" class="btn-cancel">Batal</button>
                <button id="confirm-logout" class="btn-confirm">Logout</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
        // --- YOUR FIREBASE CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyCaEVRX88dod-9BWHpCQ_RTlIHwus-29RQ",
            authDomain: "tittpgo-7f884.firebaseapp.com",
            projectId: "tittpgo-28f84",
            storageBucket: "tittpgo-7f884.appspot.com",
            messagingSenderId: "816687553591",
            appId: "1:816687553591:web:MjlMJMTVJOWEINThIY0dYjllJWlOWlOWF"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        // const auth = firebase.auth(); // Uncomment if using Firebase Authentication

        // --- PENGAMBILAN JASTIPER ID SETELAH LOGIN ---
        let currentJastiperId = localStorage.getItem('jastiperId');
        if (!currentJastiperId) {
            console.warn("Jastiper ID tidak ditemukan di localStorage. Menggunakan ID contoh untuk testing.");
            const tempJastiperId = "contoh_jastiper_id_untuk_testing"; // Ganti ini dengan ID jastiper yang valid dari Firestore Anda untuk pengujian
            localStorage.setItem('jastiperId', tempJastiperId); // Simpan untuk sesi demo
            currentJastiperId = tempJastiperId;
        } else {
            console.log("Jastiper ID yang terdeteksi:", currentJastiperId);
        }

        // DOM Elements for order lists and summary
        const totalPesananEl = document.getElementById('total-pesanan');
        const menungguPembayaranEl = document.getElementById('menunggu-pembayaran');
        const siapDiprosesEl = document.getElementById('siap-diproses');
        const dalamPengirimanEl = document.getElementById('dalam-pengiriman');

        const semuaPesananList = document.getElementById('semua-pesanan-list');
        const belumBayarList = document.getElementById('belum-bayar-list');
        const siapProsesList = document.getElementById('siap-proses-list');
        const dikirimList = document.getElementById('dikirim-list');
        const selesaiList = document.getElementById('selesai-list');
        const dibatalkanList = document.getElementById('dibatalkan-list');

        // Tab Elements (same as edit_produk.html)
        const tabButtons = document.querySelectorAll('.tab-button');
        const tabContents = document.querySelectorAll('.tab-content');

        // Fungsi untuk mengaktifkan tab (sama dengan edit_produk.html)
        function activateTab(tabName) {
            tabButtons.forEach(button => {
                if (button.dataset.tab === tabName) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });

            tabContents.forEach(content => {
                if (content.id === `${tabName}-content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
        }

        // Event Listeners for tabs (sama dengan edit_produk.html)
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                activateTab(button.dataset.tab);
                loadOrdersByStatus(button.dataset.tab); // Load orders for the selected tab
            });
        });

        // Fungsi untuk merender daftar pesanan ke dalam tabel
        function renderOrderList(orders, targetElement) {
            targetElement.innerHTML = ''; // Clear existing list
            if (orders.length === 0) {
                targetElement.innerHTML = `<tr><td colspan="7" class="text-center py-4 text-gray-500">Tidak ada pesanan.</td></tr>`;
                return;
            }

            orders.forEach(order => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${order.id}</td>
                    <td>${order.namaProduk || 'N/A'}</td>
                    <td>${order.namaPembeli || 'N/A'}</td>
                    <td>${order.tanggalPesanan ? new Date(order.tanggalPesanan.toDate()).toLocaleDateString('id-ID') : 'N/A'}</td>
                    <td>Rp ${order.totalHarga ? order.totalHarga.toLocaleString('id-ID') : '0'}</td>
                    <td><span class="status-badge status-${order.status.toLowerCase().replace(/\s/g, '-')}">${order.status}</span></td>
                    <td>
                        <button class="btn-secondary btn-sm" onclick="viewOrderDetail('${order.id}')">Detail</button>
                    </td>
                `;
                targetElement.appendChild(row);
            });
        }

        // Fungsi untuk mendapatkan kelas badge status
        function getStatusBadgeClass(status) {
            switch (status) {
                case 'Menunggu Pembayaran': return 'status-menunggu-pembayaran';
                case 'Diproses': return 'status-diproses';
                case 'Dikirim': return 'status-dikirim';
                case 'Selesai': return 'status-selesai';
                case 'Dibatalkan': return 'status-dibatalkan';
                case 'Dikembalikan': return 'status-dikembalikan';
                case 'Perlu Verifikasi': return 'status-perlu-verifikasi';
                default: return '';
            }
        }


        // Fungsi untuk memuat pesanan berdasarkan status atau semua
        async function loadOrdersByStatus(tabName) {
            let orderQuery = db.collection('orders').where('jastiperId', '==', currentJastiperId);
            let targetListElement;

            // Set target list element based on tab
            switch (tabName) {
                case 'semua-pesanan':
                    targetListElement = semuaPesananList;
                    break;
                case 'belum-bayar':
                    orderQuery = orderQuery.where('status', '==', 'Menunggu Pembayaran');
                    targetListElement = belumBayarList;
                    break;
                case 'siap-proses':
                    orderQuery = orderQuery.where('status', '==', 'Diproses');
                    targetListElement = siapProsesList;
                    break;
                case 'dikirim':
                    orderQuery = orderQuery.where('status', '==', 'Dikirim');
                    targetListElement = dikirimList;
                    break;
                case 'selesai':
                    orderQuery = orderQuery.where('status', '==', 'Selesai');
                    targetListElement = selesaiList;
                    break;
                case 'dibatalkan':
                    orderQuery = orderQuery.where('status', '==', 'Dibatalkan');
                    targetListElement = dibatalkanList;
                    break;
                default:
                    targetListElement = semuaPesananList;
                    break;
            }

            try {
                // Tampilkan pesan loading
                targetListElement.innerHTML = `<tr><td colspan="7" class="text-center py-4 text-gray-500">Memuat pesanan...</td></tr>`;

                const querySnapshot = await orderQuery.orderBy('tanggalPesanan', 'desc').get();
                const orders = querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));

                // Update summary cards on 'semua-pesanan' load (or initial load)
                if (tabName === 'semua-pesanan') {
                    updateSummaryCards(orders);
                }

                // Set the correct status badge class for each order
                orders.forEach(order => {
                    order.statusClass = getStatusBadgeClass(order.status);
                });


                renderOrderList(orders, targetListElement);

            } catch (error) {
                console.error("Error loading orders:", error);
                targetListElement.innerHTML = `<tr><td colspan="7" class="text-center py-4 text-red-500">Gagal memuat pesanan: ${error.message}</td></tr>`;
            }
        }

        // Function to update summary cards
        function updateSummaryCards(allOrders) {
            const total = allOrders.length;
            const menungguBayar = allOrders.filter(order => order.status === 'Menunggu Pembayaran').length;
            const siapProses = allOrders.filter(order => order.status === 'Diproses').length;
            const dalamPengiriman = allOrders.filter(order => order.status === 'Dikirim').length;

            totalPesananEl.textContent = total;
            menungguPembayaranEl.textContent = menungguBayar;
            siapDiprosesEl.textContent = siapProses;
            dalamPengirimanEl.textContent = dalamPengiriman;
        }


        // Dummy function for viewing order detail
        function viewOrderDetail(orderId) {
            // Implement navigation to a detailed order page, e.g.:
            // window.location.href = `order_detail.html?id=${orderId}`;
            alert(`Melihat detail pesanan ID: ${orderId}`);
        }

        // Initial load on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            if (currentJastiperId) {
                activateTab('semua-pesanan'); // Activate "Semua Pesanan" tab by default
                loadOrdersByStatus('semua-pesanan'); // Load all orders initially
            } else {
                alert("Anda harus login untuk melihat dashboard.");
                window.location.href = 'halaman_login_anda.html'; // Redirect to your login page
            }
        });

        // Logout functionality (same as edit_produk.html)
        const logoutButton = document.getElementById('logout-button');
        const logoutModal = document.getElementById('logout-modal');
        const cancelLogoutButton = document.getElementById('cancel-logout');
        const confirmLogoutButton = document.getElementById('confirm-logout');

        logoutButton.addEventListener('click', () => { logoutModal.classList.add('show'); });
        cancelLogoutButton.addEventListener('click', () => { logoutModal.classList.remove('show'); });
        confirmLogoutButton.addEventListener('click', () => {
            // In a real app, you'd also sign out from Firebase Auth here:
            // firebase.auth().signOut().then(() => { ... });
            localStorage.removeItem('jastiperId');
            alert("Anda telah logout.");
            window.location.href = 'halaman_login_anda.html'; // Redirect to your login page
        });
    </script>
</body>

</html>