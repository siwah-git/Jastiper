<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <title>Detail Laporan - Laporan Penjualan Juli 2025 - TitipGo Admin</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      /* Custom styles */
      :root {
        --sidebar-width: 268px; /* Pastikan nilai ini sesuai dengan lebar aktual sidebar Anda */
      }

      .sidebar {
        width: var(--sidebar-width);
      }

      .main-content {
        margin-left: var(--sidebar-width);
        flex-grow: 1;
      }

      body {
        min-height: 100vh;
      }

      /* Untuk membatasi lebar konten utama agar tidak terlalu lebar di layar besar */
      .content-wrapper {
        max-width: 1000px; /* Sedikit lebih lebar untuk laporan yang mungkin berisi grafik/tabel */
        margin-left: auto;
        margin-right: auto;
      }

      /* Style untuk badge status (jika laporan memiliki status tertentu, misal Draft/Final) */
      .status-badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px; /* Full rounded */
        font-weight: 600; /* Semibold */
        font-size: 0.75rem; /* text-xs */
        line-height: 1rem;
        display: inline-block;
      }

      .status-final {
        background-color: #d1fae5; /* green-100 */
        color: #065f46; /* green-800 */
      }
      .status-draft {
        background-color: #fefcbf; /* yellow-100 */
        color: #92400e; /* yellow-800 */
      }
      .status-archived {
        background-color: #e2e8f0; /* gray-200 */
        color: #4b5563; /* gray-700 */
      }
    </style>
  </head>
  <body class="flex min-h-screen bg-gray-100">
    <aside
      class="sidebar bg-white text-gray-800 flex flex-col justify-between shadow-lg fixed top-0 left-0 h-screen z-50"
    >
      <div>
        <nav class="space-y-2 p-4">
          <img
            src="asset/images/logosiwah.png"
            alt="Logo"
            class="w-48 h-20 object-contain mb-4"
          />

          <a
            href="admin-dashboard.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-home mr-3 text-lg"></i> Dashboard
          </a>
          <a
            href="admin-katalog.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-box mr-3 text-lg"></i> Manajemen Katalog
          </a>
          <a
            href="admin-pengguna.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-users mr-3 text-lg"></i> Manajemen Pengguna
          </a>
          <a
            href="admin-pesanan.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-shopping-cart mr-3 text-lg"></i> Manajemen Pesanan
          </a>
          <a
            href="admin-aduan.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-envelope mr-3 text-lg"></i> Aduan
          </a>
          <a
            href="admin-laporan.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-chart-line mr-3 text-lg"></i> Laporan
          </a>
          <a
            href="admin-pendapatan.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-money-bill-wave mr-3 text-lg"></i> Pendapatan
          </a>
          <a
            href="admin-profil.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-user-circle mr-3 text-lg"></i> Profil
          </a>
          <a
            href="admin-about-us.html"
            class="sidebar-item flex items-center py-2 px-4 rounded-md text-gray-700 hover:bg-pink-100 hover:text-pink-600 transition duration-200 ease-in-out"
          >
            <i class="fas fa-info-circle mr-3 text-lg"></i> Tentang Kami
          </a>
        </nav>
      </div>
      <footer class="text-sm text-gray-500 text-center p-4 border-t">
        &copy; 2025 TitipGo. All rights reserved.
      </footer>
    </aside>

    <main class="main-content p-8 overflow-y-auto">
      <div class="content-wrapper">
        <div
          class="bg-gradient-to-r from-purple-600 to-indigo-700 p-6 text-white flex flex-col md:flex-row items-start md:items-center justify-between mb-8 rounded-lg shadow-lg"
        >
          <div class="flex items-center mb-4 md:mb-0">
            <a
              href="laporan.html"
              class="text-white hover:text-purple-100 mr-4"
            >
              <i class="fas fa-arrow-left text-2xl"></i>
            </a>
            <h1 class="text-2xl font-bold">Laporan Penjualan Juli 2025</h1>
          </div>
          <div class="text-right flex gap-3">
            <button
              class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm transition duration-200 ease-in-out flex items-center text-sm"
            >
              <i class="fas fa-file-pdf mr-2"></i> Ekspor PDF
            </button>
            <button
              class="bg-teal-600 hover:bg-teal-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm transition duration-200 ease-in-out flex items-center text-sm"
            >
              <i class="fas fa-file-excel mr-2"></i> Ekspor Excel
            </button>
            <a
              href="#"
              class="text-purple-100 hover:text-white transition duration-200 ease-in-out px-4 py-2 rounded-md border border-purple-400 hover:bg-purple-700 text-sm flex items-center"
              ><i class="fas fa-sign-out-alt mr-2"></i> Logout</a
            >
          </div>
        </div>

        <nav class="text-sm text-gray-600 mb-6">
          <ol class="list-none p-0 inline-flex">
            <li class="flex items-center">
              <a
                href="admin-dashboard.html"
                class="text-blue-600 hover:text-blue-800"
                >Dashboard</a
              >
              <i class="fas fa-chevron-right mx-2 text-xs"></i>
            </li>
            <li class="flex items-center">
              <a
                href="admin-laporan.html"
                class="text-blue-600 hover:text-blue-800"
                >Laporan</a
              >
              <i class="fas fa-chevron-right mx-2 text-xs"></i>
            </li>
            <li class="flex items-center text-gray-500">Penjualan Juli 2025</li>
          </ol>
        </nav>

        <div class="flex flex-col space-y-6">
          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3
              class="text-xl font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-clipboard-list text-purple-500 mr-2"></i>
              Informasi Laporan
            </h3>
            <div
              class="grid grid-cols-1 sm:grid-cols-2 gap-y-3 gap-x-6 text-gray-700 text-sm"
            >
              <p>
                <strong>Nama Laporan:</strong> Laporan Penjualan Bulan Juli 2025
              </p>
              <p><strong>ID Laporan:</strong> LPJ-202507</p>
              <p><strong>Periode:</strong> 1 Juli 2025 - 31 Juli 2025</p>
              <p><strong>Tanggal Dibuat:</strong> 1 Agustus 2025, 10:30 WIB</p>
              <p><strong>Dibuat Oleh:</strong> Admin TitipGo</p>
              <p>
                <strong>Status:</strong>
                <span
                  id="laporan-status-badge"
                  class="status-badge status-final"
                  >Final</span
                >
              </p>
            </div>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3
              class="text-xl font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-chart-bar text-red-500 mr-2"></i> Ringkasan
              Kinerja
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
              <div
                class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
              >
                <p class="text-sm text-gray-600">Total Penjualan</p>
                <p class="text-2xl font-bold text-green-600 mt-1">
                  Rp 150.000.000
                </p>
              </div>
              <div
                class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
              >
                <p class="text-sm text-gray-600">Jumlah Pesanan</p>
                <p class="text-2xl font-bold text-blue-600 mt-1">350</p>
              </div>
              <div
                class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
              >
                <p class="text-sm text-gray-600">Jastiper Aktif</p>
                <p class="text-2xl font-bold text-purple-600 mt-1">45</p>
              </div>
              <div
                class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
              >
                <p class="text-sm text-gray-600">Pelanggan Baru</p>
                <p class="text-2xl font-bold text-indigo-600 mt-1">120</p>
              </div>
              <div
                class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
              >
                <p class="text-sm text-gray-600">Produk Terjual</p>
                <p class="text-2xl font-bold text-yellow-600 mt-1">520</p>
              </div>
              <div
                class="bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200"
              >
                <p class="text-sm text-gray-600">Rata-rata Nilai Pesanan</p>
                <p class="text-2xl font-bold text-orange-600 mt-1">
                  Rp 428.571
                </p>
              </div>
            </div>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3
              class="text-xl font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-chart-pie text-cyan-500 mr-2"></i> Visualisasi
              Data
            </h3>
            <div class="flex flex-col md:flex-row gap-6">
              <div class="md:w-1/2">
                <h4 class="font-semibold text-gray-700 mb-2">
                  Penjualan Harian
                </h4>
                <canvas id="dailySalesChart" class="w-full"></canvas>
              </div>
              <div class="md:w-1/2">
                <h4 class="font-semibold text-gray-700 mb-2">
                  Penjualan per Kategori Produk
                </h4>
                <canvas id="categorySalesChart" class="w-full"></canvas>
              </div>
            </div>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md overflow-x-auto">
            <h3
              class="text-xl font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-table text-indigo-500 mr-2"></i> Data Penjualan
              Rinci
            </h3>
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Tanggal
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    ID Pesanan
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Produk
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Jastiper
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Total
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    2025-07-28
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:underline"
                  >
                    <a href="admin-pesanan-detail.html?id=ORD12345"
                      >#ORD12345</a
                    >
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    Baju Batik, Sneakers
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:underline"
                  >
                    <a href="pengguna-detail.html?id=JSTP001">Dhea A.</a>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    Rp 765.000
                  </td>
                </tr>
                <tr>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    2025-07-27
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:underline"
                  >
                    <a href="admin-pesanan-detail.html?id=ORD12346"
                      >#ORD12346</a
                    >
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    Tas Kulit
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm text-blue-600 hover:underline"
                  >
                    <a href="pengguna-detail.html?id=JSTP002">Rizky S.</a>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    Rp 1.200.000
                  </td>
                </tr>
              </tbody>
            </table>
            <div class="mt-4 text-right">
              <a href="#" class="text-blue-600 hover:underline text-sm"
                >Lihat Semua Data Penjualan &raquo;</a
              >
            </div>
          </div>

          <div class="bg-white p-6 rounded-lg shadow-md">
            <h3
              class="text-xl font-semibold text-gray-800 mb-4 flex items-center"
            >
              <i class="fas fa-lightbulb text-yellow-500 mr-2"></i> Analisis &
              Kesimpulan
            </h3>
            <p class="text-gray-700 text-sm leading-relaxed">
              Penjualan di bulan Juli menunjukkan pertumbuhan yang stabil,
              terutama didorong oleh kategori fashion dan aksesoris. Jumlah
              jastiper aktif juga mengalami peningkatan, berkontribusi pada
              diversifikasi produk. Area yang perlu diperhatikan adalah tingkat
              retur produk yang sedikit meningkat di akhir bulan. Disarankan
              untuk menganalisis lebih lanjut penyebab retur dan kualitas produk
              dari beberapa jastiper.
            </p>
          </div>
        </div>
      </div>
    </main>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Skrip untuk menyorot navigasi sidebar
        const currentPath = window.location.pathname.split("/").pop();
        const sidebarLinks = document.querySelectorAll(".sidebar-item");

        sidebarLinks.forEach((link) => {
          const linkHref = link.getAttribute("href");
          const linkFileName = linkHref.split("/").pop();

          let isLinkActive = false;

          // Special handling for detail pages: highlight parent menu
          if (
            linkFileName === "laporan.html" &&
            currentPath.startsWith("admin-laporan-detail")
          ) {
            isLinkActive = true;
          } else if (linkFileName === currentPath) {
            isLinkActive = true;
          } else if (
            (currentPath === "" || currentPath === "index.html") &&
            linkFileName === "admin-dashboard.html"
          ) {
            isLinkActive = true;
          }

          if (isLinkActive) {
            link.classList.remove(
              "text-gray-700",
              "hover:bg-pink-100",
              "hover:text-pink-600",
              "transition",
              "duration-200",
              "ease-in-out"
            );
            link.classList.add("bg-pink-600", "text-white", "font-semibold");
          } else {
            link.classList.remove("bg-pink-600", "text-white", "font-semibold");
            link.classList.add(
              "text-gray-700",
              "hover:bg-pink-100",
              "hover:text-pink-600",
              "transition",
              "duration-200",
              "ease-in-out"
            );
          }
        });

        // Contoh JavaScript untuk mengubah badge status laporan
        const laporanStatus = "final"; // Ganti dengan "final", "draft", "archived"
        const statusBadge = document.getElementById("laporan-status-badge");

        if (statusBadge) {
          statusBadge.className = "status-badge"; // Reset classes
          switch (laporanStatus) {
            case "final":
              statusBadge.classList.add("status-final");
              statusBadge.textContent = "Status: Final";
              break;
            case "draft":
              statusBadge.classList.add("status-draft");
              statusBadge.textContent = "Status: Draf";
              break;
            case "archived":
              statusBadge.classList.add("status-archived");
              statusBadge.textContent = "Status: Diarsipkan";
              break;
            default:
              statusBadge.classList.add("bg-gray-200", "text-gray-800");
              statusBadge.textContent = "Status: Tidak Diketahui";
              break;
          }
        }

        // --- Chart.js Initialization ---
        // Data for Daily Sales Chart
        const dailySalesData = {
          labels: [
            "1 Jul",
            "5 Jul",
            "10 Jul",
            "15 Jul",
            "20 Jul",
            "25 Jul",
            "30 Jul",
          ],
          datasets: [
            {
              label: "Penjualan (Rp)",
              data: [
                5000000, 7000000, 6000000, 9000000, 8000000, 10000000, 12000000,
              ],
              borderColor: "rgb(75, 192, 192)",
              tension: 0.1,
              fill: false,
            },
          ],
        };

        const dailySalesConfig = {
          type: "line",
          data: dailySalesData,
          options: {
            responsive: true,
            plugins: {
              legend: {
                display: true,
                position: "top",
              },
              title: {
                display: false, // Title moved to h4 tag
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value, index, values) {
                    if (parseInt(value) >= 1000000) {
                      return (
                        "Rp " +
                        (value / 1000000).toLocaleString("id-ID") +
                        " Jt"
                      );
                    }
                    if (parseInt(value) >= 1000) {
                      return (
                        "Rp " + (value / 1000).toLocaleString("id-ID") + " Rb"
                      );
                    }
                    return "Rp " + value.toLocaleString("id-ID");
                  },
                },
              },
            },
          },
        };

        var dailySalesChart = new Chart(
          document.getElementById("dailySalesChart"),
          dailySalesConfig
        );

        // Data for Category Sales Chart
        const categorySalesData = {
          labels: [
            "Fashion",
            "Elektronik",
            "Kuliner",
            "Perlengkapan Rumah",
            "Kecantikan",
            "Lain-lain",
          ],
          datasets: [
            {
              label: "Penjualan (%)",
              data: [30, 20, 15, 10, 10, 15], // Example percentages
              backgroundColor: [
                "rgb(255, 99, 132)",
                "rgb(54, 162, 235)",
                "rgb(255, 205, 86)",
                "rgb(75, 192, 192)",
                "rgb(153, 102, 255)",
                "rgb(255, 159, 64)",
              ],
              hoverOffset: 4,
            },
          ],
        };

        const categorySalesConfig = {
          type: "pie",
          data: categorySalesData,
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "top",
              },
              title: {
                display: false, // Title moved to h4 tag
              },
            },
          },
        };

        var categorySalesChart = new Chart(
          document.getElementById("categorySalesChart"),
          categorySalesConfig
        );
      });
    </script>
  </body>
</html>
